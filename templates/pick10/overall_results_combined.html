{% if   pool_state == "week_not_started" %}
<div id="weeknotstarted-pool-state">week {{last_week_number}} pick entry deadline has passed, no games have started</div>
{% elif pool_state == "enter_picks" %}
<div id="enterpicks-pool-state">currently entering picks for week {{last_week_number}}</div>
{% elif pool_state == "week_in_progress" %}
<div id="weekinprogress-pool-state">week {{last_week_number}} in progress</div>
{% elif pool_state == "week_setup" or pool_state == "week_final" %}
<div id="weekfinal-pool-state">week {{last_week_number}} final</div>
{% elif pool_state == "end_of_year" %}
<div id="final-pool-state">final results</div>
{% endif %}
<table id="overall_results_table" class="tablesorter">
    <thead class="results-header">
        <tr id="results_row">
            <th id="header_rank" class="th_header"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Rank</a></span></th>
            <th id="header_player" class="th_header"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Player</a></span></th>
            <th id="header_overall" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Overall</a></span></th>
            {% if pool_state == "week_in_progress" %}
            <th id="header_projected" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Projected</a></span></th>
            {% endif %}
            {% if pool_state == "week_not_started" or pool_state == "week_in_progress" or pool_state == "week_final" %}
            <th id="header_possible" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Possible</a></span></th>
            {% endif %}
            <th id="header_winpct" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Win Pct.</a></span></th>
            {% for wk_num in weeks_in_year %}
            <th id="header_wk{{wk_num}}" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">{{wk_num}}</a></span></th>
            {% endfor %}
            {% if pool_state == "week_in_progress" %}
            <th id="header_wkprojected" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Wk{{last_week_number}} Projected</a></span></th>
            <th id="header_wkpossible" class="th_header sortInitialOrder-desc"><span><a class="link-header btn btn-default btn-xs active" href="#" role="button">Wk{{last_week_number}} Possible</a></span></th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for result in results %}
        <tr id="player_{{result.player_id}}">
                {% if pool_state == "week_in_progress" and rank == "projected" %}
            <td id="p_rank{{result.player_id}}" class="p_content">{{result.projected_rank}}</td>
                {% else %}
            <td id="p_rank{{result.player_id}}" class="p_content">{{result.rank}}</td>
                {% endif %}
            <td id="p_player_{{result.player_id}}" class="player-content">{{result.player_name}}</td>
            <td id="p_overall_{{result.player_id}}" class="highlight-content">{{result.overall}}</td>
                {% if pool_state == "week_in_progress" %}
            <td id="p_projected_{{result.player_id}}" class="highlight-content">{{result.projected}}</td>
                {% endif %}
                {% if pool_state == "week_not_started" or pool_state == "week_in_progress" or pool_state == "week_final" %}
            <td id="p_possible_{{result.player_id}}" class="p_content">{{result.possible}}</td>
                {% endif %}
            <td id="p_winpct_{{result.player_id}}" class="p_content">{{result.win_pct}}</td>
                {% for week_winner,week_points in result.week_points_info %}
                    {% if week_winner %}
            <td id="p_weeklink_{{result.player_id}}_{{forloop.counter}}" class="p_content"><a class="week-link" href="{% url 'player_results' year forloop.counter result.player_id %}"><span class="week-winner">{{week_points}}</span></a></td>
                    {% else %}
            <td id="p_weeklink_{{result.player_id}}_{{forloop.counter}}" class="p_content"><a class="week-link" href="{% url 'player_results' year forloop.counter result.player_id %}">{{week_points}}</a></td>
                    {% endif %}
                {% endfor %}
                {% if pool_state == "week_in_progress" %}
            <td id="p_wkprojected_{{result.player_id}}" class="p_content">{{result.last_week_projected}}</td>
            <td id="p_wkpossible_{{result.player_id}}" class="p_content">{{result.last_week_possible}}</td>
                {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
